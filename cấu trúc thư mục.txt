BOOK_STORE/
â”œâ”€â”€ node_modules/                       # ThÆ° má»¥c chá»©a cÃ¡c thÆ° viá»‡n Ä‘Ã£ cÃ i Ä‘áº·t qua npm
â”œâ”€â”€ public/                             # "Máº¶T TIá»€N" - Chá»©a cÃ¡c file tÄ©nh mÃ  trÃ¬nh duyá»‡t cÃ³ thá»ƒ truy cáº­p
â”‚   â”œâ”€â”€ css/                            # ThÆ° má»¥c chá»©a file CSS
â”‚   â”‚   â”œâ”€â”€ admin-style.css             # CSS tÃ¹y chá»‰nh cho trang quáº£n trá»‹
â”‚   â”‚   â””â”€â”€ style.css                   # CSS tÃ¹y chá»‰nh cho trang ngÆ°á»i dÃ¹ng
â”‚   â”œâ”€â”€ images/                         # ThÆ° má»¥c chá»©a áº£nh tÄ©nh
â”‚   â”‚   â””â”€â”€ placeholder.png             # áº¢nh máº·c Ä‘á»‹nh, áº£nh giá»¯ chá»— (placeholder)
â”‚   â””â”€â”€ js/                             # ThÆ° má»¥c chá»©a file JavaScript phÃ­a client
â”‚       â”œâ”€â”€ admin-auth.js               # JS xá»­ lÃ½ form Ä‘Äƒng nháº­p/Ä‘Äƒng kÃ½ admin
â”‚       â”œâ”€â”€ admin-categories.js         # JS xá»­ lÃ½ trang quáº£n lÃ½ danh má»¥c (thÃªm, sá»­a, xÃ³a)
â”‚       â”œâ”€â”€ admin-order-detail.js       # JS xá»­ lÃ½ trang chi tiáº¿t Ä‘Æ¡n hÃ ng (admin)
â”‚       â”œâ”€â”€ admin-order-list.js         # JS xá»­ lÃ½ trang danh sÃ¡ch Ä‘Æ¡n hÃ ng (admin, lá»c, tÃ¬m kiáº¿m)
â”‚       â”œâ”€â”€ admin-product-list.js       # JS xá»­ lÃ½ trang danh sÃ¡ch sáº£n pháº©m (admin)
|		|-- admin-product.js
â”‚       â”œâ”€â”€ admin-receipt.js            # JS xá»­ lÃ½ trang quáº£n lÃ½ phiáº¿u nháº­p
â”‚       â”œâ”€â”€ admin-user-list.js          # JS xá»­ lÃ½ trang quáº£n lÃ½ ngÆ°á»i dÃ¹ng
â”‚       â”œâ”€â”€ auth.js                     # JS xá»­ lÃ½ Ä‘Äƒng nháº­p/Ä‘Äƒng kÃ½ cho ngÆ°á»i dÃ¹ng
â”‚       â”œâ”€â”€ cart.js                     # JS xá»­ lÃ½ trang giá» hÃ ng (tÄƒng/giáº£m sá»‘ lÆ°á»£ng, xÃ³a)
â”‚       â”œâ”€â”€ checkout.js                 # JS xá»­ lÃ½ trang thanh toÃ¡n
â”‚       â”œâ”€â”€ main.js                     # JS chung cho toÃ n trang ngÆ°á»i dÃ¹ng
â”‚       â”œâ”€â”€ my-orders.js                # JS xá»­ lÃ½ trang lá»‹ch sá»­ Ä‘Æ¡n hÃ ng cá»§a tÃ´i
â”‚       â”œâ”€â”€ order-detail.js             # JS xá»­ lÃ½ trang chi tiáº¿t Ä‘Æ¡n hÃ ng cá»§a ngÆ°á»i dÃ¹ng
â”‚       â””â”€â”€ profile.js                  # JS xá»­ lÃ½ trang thÃ´ng tin cÃ¡ nhÃ¢n (cáº­p nháº­t, Ä‘á»•i máº­t kháº©u)
â”‚
â”œâ”€â”€ src/                                # "Bá»˜ NÃƒO" cá»§a á»©ng dá»¥ng, chá»©a toÃ n bá»™ code backend
â”‚   â”œâ”€â”€ config/                         # ThÆ° má»¥c cáº¥u hÃ¬nh
â”‚   â”‚   â””â”€â”€ connectDB.js                # Cáº¥u hÃ¬nh vÃ  khá»Ÿi táº¡o káº¿t ná»‘i database (Sequelize)
â”‚   â”œâ”€â”€ controllers/                    # Chá»©a cÃ¡c "nháº¡c trÆ°á»Ÿng" xá»­ lÃ½ logic nghiá»‡p vá»¥
â”‚   â”‚   â”œâ”€â”€ adminViewController.js      # Render cÃ¡c trang giao diá»‡n admin (tráº£ vá» HTML)
â”‚   â”‚   â”œâ”€â”€ authController.js           # Xá»­ lÃ½ logic ÄÄƒng kÃ½, ÄÄƒng nháº­p, JWT
â”‚   â”‚   â”œâ”€â”€ cartController.js           # Xá»­ lÃ½ API cho Giá» hÃ ng (thÃªm, sá»­a, xÃ³a item)
â”‚   â”‚   â”œâ”€â”€ categoryController.js       # Xá»­ lÃ½ API cho Danh má»¥c
â”‚   â”‚   â”œâ”€â”€ comboController.js          # Xá»­ lÃ½ API cho Combo sáº£n pháº©m
â”‚   â”‚   â”œâ”€â”€ dashboardController.js      # Xá»­ lÃ½ API cho trang Dashboard (thá»‘ng kÃª)
â”‚   â”‚   â”œâ”€â”€ ebookController.js          # Xá»­ lÃ½ API cho E-book (táº£i file...)
â”‚   â”‚   â”œâ”€â”€ orderController.js          # Xá»­ lÃ½ API cho ÄÆ¡n hÃ ng (Ä‘áº·t hÃ ng, cáº­p nháº­t tráº¡ng thÃ¡i)
â”‚   â”‚   â”œâ”€â”€ productController.js        # Xá»­ lÃ½ API cho Sáº£n pháº©m (thÃªm, sá»­a, xÃ³a, láº¥y dá»¯ liá»‡u)
â”‚   â”‚   â”œâ”€â”€ promotionController.js      # Xá»­ lÃ½ API cho Khuyáº¿n mÃ£i
â”‚   â”‚   â”œâ”€â”€ receiptController.js        # Xá»­ lÃ½ API cho Phiáº¿u nháº­p hÃ ng
â”‚   â”‚   â”œâ”€â”€ reviewController.js         # Xá»­ lÃ½ API cho BÃ¬nh luáº­n/ÄÃ¡nh giÃ¡
â”‚   â”‚   â”œâ”€â”€ slideshowController.js      # Xá»­ lÃ½ API cho Slideshow trang chá»§
â”‚   â”‚   â”œâ”€â”€ userController.js           # Xá»­ lÃ½ API cho NgÆ°á»i dÃ¹ng (cáº­p nháº­t profile, quáº£n lÃ½)
â”‚   â”‚   â””â”€â”€ viewController.js           # Render cÃ¡c trang giao diá»‡n ngÆ°á»i dÃ¹ng (tráº£ vá» HTML)
â”‚   â”œâ”€â”€ middlewares/                    # Chá»©a cÃ¡c "báº£o vá»‡" cháº¡y giá»¯a request vÃ  controller
â”‚   â”‚   â””â”€â”€ authMiddleware.js           # Kiá»ƒm tra token, xÃ¡c thá»±c ngÆ°á»i dÃ¹ng, phÃ¢n quyá»n admin
â”‚   â”œâ”€â”€ models/                         # Äá»‹nh nghÄ©a cáº¥u trÃºc dá»¯ liá»‡u (tÆ°Æ¡ng á»©ng cÃ¡c báº£ng trong DB)
â”‚   â”‚   â”œâ”€â”€ cartItemModel.js            # Model: Sáº£n pháº©m trong giá» hÃ ng
â”‚   â”‚   â”œâ”€â”€ cartModel.js                # Model: Giá» hÃ ng
â”‚   â”‚   â”œâ”€â”€ categoryModel.js            # Model: Danh má»¥c sáº£n pháº©m
â”‚   â”‚   â”œâ”€â”€ comboItemModel.js           # Model: Sáº£n pháº©m trong má»™t combo
â”‚   â”‚   â”œâ”€â”€ comboModel.js               # Model: Combo sáº£n pháº©m
â”‚   â”‚   â”œâ”€â”€ ebookDownloadLinkModel.js   # Model: Link táº£i ebook cho ngÆ°á»i dÃ¹ng Ä‘Ã£ mua
â”‚   â”‚   â”œâ”€â”€ index.js                    # File tá»•ng há»£p táº¥t cáº£ model vÃ  thiáº¿t láº­p quan há»‡ (associations)
â”‚   â”‚   â”œâ”€â”€ orderItemModel.js           # Model: Sáº£n pháº©m trong má»™t Ä‘Æ¡n hÃ ng
â”‚   â”‚   â”œâ”€â”€ orderModel.js               # Model: ÄÆ¡n hÃ ng
â”‚   â”‚   â”œâ”€â”€ productModel.js             # Model: Sáº£n pháº©m
â”‚   â”‚   â”œâ”€â”€ promotionModel.js           # Model: Khuyáº¿n mÃ£i
â”‚   â”‚   â”œâ”€â”€ receiptItemModel.js         # Model: Chi tiáº¿t phiáº¿u nháº­p
â”‚   â”‚   â”œâ”€â”€ receiptModel.js             # Model: Phiáº¿u nháº­p
â”‚   â”‚   â”œâ”€â”€ reviewModel.js              # Model: ÄÃ¡nh giÃ¡/BÃ¬nh luáº­n
â”‚   â”‚   â”œâ”€â”€ roleModel.js                # Model: Vai trÃ² (User, Admin)
â”‚   â”‚   â”œâ”€â”€ slideshowModel.js           # Model: Slideshow
â”‚   â”‚   â””â”€â”€ userModel.js                # Model: NgÆ°á»i dÃ¹ng
â”‚   â”œâ”€â”€ routes/                         # Chá»©a cÃ¡c "báº£ng chá»‰ Ä‘Æ°á»ng" (endpoints)
â”‚   â”‚   â”œâ”€â”€ adminRouter.js              # CÃ¡c route cho trang admin (VD: /admin/products)
â”‚   â”‚   â”œâ”€â”€ authRouter.js               # CÃ¡c route cho API xÃ¡c thá»±c (VD: /api/auth/login)
â”‚   â”‚   â”œâ”€â”€ cartRouter.js               # CÃ¡c route cho API giá» hÃ ng
â”‚   â”‚   â”œâ”€â”€ categoryRouter.js           # CÃ¡c route cho API danh má»¥c
â”‚   â”‚   â”œâ”€â”€ comboRouter.js              # CÃ¡c route cho API combo
â”‚   â”‚   â”œâ”€â”€ dashboardRouter.js          # CÃ¡c route cho API dashboard
â”‚   â”‚   â”œâ”€â”€ ebookRouter.js              # CÃ¡c route cho API ebook
â”‚   â”‚   â”œâ”€â”€ orderRouter.js              # CÃ¡c route cho API Ä‘Æ¡n hÃ ng
â”‚   â”‚   â”œâ”€â”€ productRouter.js            # CÃ¡c route cho API sáº£n pháº©m
â”‚   â”‚   â”œâ”€â”€ promotionRouter.js          # CÃ¡c route cho API khuyáº¿n mÃ£i
â”‚   â”‚   â”œâ”€â”€ receiptRouter.js            # CÃ¡c route cho API phiáº¿u nháº­p
â”‚   â”‚   â”œâ”€â”€ reviewRouter.js             # CÃ¡c route cho API Ä‘Ã¡nh giÃ¡
â”‚   â”‚   â”œâ”€â”€ roleRouter.js               # CÃ¡c route cho API vai trÃ²
â”‚   â”‚   â”œâ”€â”€ slideshowRouter.js          # CÃ¡c route cho API slideshow
â”‚   â”‚   â”œâ”€â”€ userRouter.js               # CÃ¡c route cho API ngÆ°á»i dÃ¹ng
â”‚   â”‚   â””â”€â”€ viewRouter.js               # CÃ¡c route cho trang ngÆ°á»i dÃ¹ng (VD: /, /cart, /profile)
â”‚   â”œâ”€â”€ seeders/                        # Chá»©a code Ä‘á»ƒ táº¡o dá»¯ liá»‡u máº«u
â”‚   â”‚   â””â”€â”€ seedData.js                 # File cháº¡y Ä‘á»ƒ bÆ¡m dá»¯ liá»‡u máº«u vÃ o database
â”‚   â”œâ”€â”€ services/                       # Chá»©a logic káº¿t ná»‘i Ä‘áº¿n dá»‹ch vá»¥ bÃªn ngoÃ i
â”‚   â”‚   â””â”€â”€ emailService.js             # Logic gá»­i email (reset password, xÃ¡c nháº­n Ä‘Æ¡n...)
â”‚   â””â”€â”€ utils/                          # Chá»©a cÃ¡c hÃ m tiá»‡n Ã­ch cÃ³ thá»ƒ tÃ¡i sá»­ dá»¥ng
â”‚       â””â”€â”€ generateToken.js            # HÃ m táº¡o JSON Web Token (JWT)
â”‚
â”œâ”€â”€ views/                              # Chá»©a cÃ¡c file giao diá»‡n (EJS)
â”‚   â”œâ”€â”€ admin/                          # Giao diá»‡n cho trang quáº£n trá»‹
â”‚   â”‚   â”œâ”€â”€ pages/                      # CÃ¡c trang chÃ­nh cá»§a admin
â”‚   â”‚   â”‚   â”œâ”€â”€ categories.ejs          # Trang quáº£n lÃ½ danh má»¥c
â”‚   â”‚   â”‚   â”œâ”€â”€ dashboard.ejs           # Trang tá»•ng quan, thá»‘ng kÃª
â”‚   â”‚   â”‚   â”œâ”€â”€ order-detail.ejs        # Trang chi tiáº¿t má»™t Ä‘Æ¡n hÃ ng
â”‚   â”‚   â”‚   â”œâ”€â”€ orders.ejs              # Trang danh sÃ¡ch Ä‘Æ¡n hÃ ng
â”‚   â”‚   â”‚   â”œâ”€â”€ product-form.ejs        # Form thÃªm/sá»­a sáº£n pháº©m
â”‚   â”‚   â”‚   â”œâ”€â”€ products.ejs            # Trang danh sÃ¡ch sáº£n pháº©m
â”‚   â”‚   â”‚   â”œâ”€â”€ receipt-detail.ejs      # Trang chi tiáº¿t má»™t phiáº¿u nháº­p
â”‚   â”‚   â”‚   â”œâ”€â”€ receipts.ejs            # Trang danh sÃ¡ch phiáº¿u nháº­p
â”‚   â”‚   â”‚   â””â”€â”€ users.ejs               # Trang danh sÃ¡ch ngÆ°á»i dÃ¹ng
â”‚   â”‚   â””â”€â”€ partials/                   # CÃ¡c thÃ nh pháº§n tÃ¡i sá»­ dá»¥ng cá»§a admin
â”‚   â”‚       â”œâ”€â”€ footer.ejs              # Pháº§n chÃ¢n trang admin
â”‚   â”‚       â””â”€â”€ header.ejs              # Pháº§n Ä‘áº§u trang vÃ  thanh menu admin
â”‚   â”œâ”€â”€ pages/                          # Giao diá»‡n cho trang ngÆ°á»i dÃ¹ng
â”‚   â”‚   â”œâ”€â”€ cart.ejs                    # Trang giá» hÃ ng
â”‚   â”‚   â”œâ”€â”€ checkout.ejs                # Trang thanh toÃ¡n
â”‚   â”‚   â”œâ”€â”€ error.ejs                   # Trang bÃ¡o lá»—i (404, 500)
â”‚   â”‚   â”œâ”€â”€ home.ejs                    # Trang chá»§
â”‚   â”‚   â”œâ”€â”€ login.ejs                   # Trang Ä‘Äƒng nháº­p
â”‚   â”‚   â”œâ”€â”€ my-orders.ejs               # Trang lá»‹ch sá»­ Ä‘Æ¡n hÃ ng cá»§a ngÆ°á»i dÃ¹ng
â”‚   â”‚   â”œâ”€â”€ order-detail.ejs            # Trang chi tiáº¿t má»™t Ä‘Æ¡n hÃ ng cá»§a ngÆ°á»i dÃ¹ng
â”‚   â”‚   â”œâ”€â”€ products.ejs                # Trang danh sÃ¡ch sáº£n pháº©m (shop)
â”‚   â”‚   â”œâ”€â”€ profile.ejs                 # Trang thÃ´ng tin cÃ¡ nhÃ¢n
â”‚   â”‚   â””â”€â”€ register.ejs                # Trang Ä‘Äƒng kÃ½
â”‚   â””â”€â”€ partials/                       # CÃ¡c thÃ nh pháº§n tÃ¡i sá»­ dá»¥ng cá»§a ngÆ°á»i dÃ¹ng
â”‚       â”œâ”€â”€ footer.ejs                  # Pháº§n chÃ¢n trang ngÆ°á»i dÃ¹ng
â”‚       â””â”€â”€ header.ejs                  # Pháº§n Ä‘áº§u trang vÃ  thanh Ä‘iá»u hÆ°á»›ng ngÆ°á»i dÃ¹ng
â”‚
â”œâ”€â”€ .env                                # LÆ°u cÃ¡c biáº¿n mÃ´i trÆ°á»ng (port, key bÃ­ máº­t, link db)
â”œâ”€â”€ .gitignore                          # CÃ¡c file/thÆ° má»¥c mÃ  Git sáº½ bá» qua (VD: node_modules, .env)
â”œâ”€â”€ cáº¥u trÃºc thÆ° má»¥c.txt                # File ghi chÃº cáº¥u trÃºc cá»§a báº¡n
â”œâ”€â”€ package-lock.json                   # KhÃ³a phiÃªn báº£n chÃ­nh xÃ¡c cá»§a cÃ¡c thÆ° viá»‡n
â”œâ”€â”€ package.json                        # ThÃ´ng tin dá»± Ã¡n vÃ  danh sÃ¡ch cÃ¡c thÆ° viá»‡n phá»¥ thuá»™c
â”œâ”€â”€ readme.md                           # File giá»›i thiá»‡u, hÆ°á»›ng dáº«n vá» dá»± Ã¡n
â”œâ”€â”€ server.js                           # File khá»Ÿi Ä‘á»™ng chÃ­nh cá»§a server Node.js
â””â”€â”€ sql_book_store.txt                  # File ghi chÃº SQL cá»§a báº¡n
		Giáº£i thÃ­ch chi tiáº¿t chá»©c nÄƒng tá»«ng file
ThÆ° má»¥c gá»‘c (/)
ğŸ“„ **.env**: File biáº¿n mÃ´i trÆ°á»ng. LÆ°u trá»¯ cÃ¡c thÃ´ng tin cáº¥u hÃ¬nh nháº¡y cáº£m mÃ  khÃ´ng Ä‘Æ°a trá»±c tiáº¿p vÃ o code, vÃ­ dá»¥: thÃ´ng tin káº¿t ná»‘i CÆ¡ sá»Ÿ dá»¯ liá»‡u (host, user, password, database), chuá»—i bÃ­ máº­t Ä‘á»ƒ mÃ£ hÃ³a Token (JWT_SECRET), cá»•ng cháº¡y server (PORT), thÃ´ng tin tÃ i khoáº£n email Ä‘á»ƒ gá»­i mail (EMAIL_USER, EMAIL_PASSWORD).

ğŸ“„ **package.json**: File quáº£n lÃ½ dá»± Ã¡n Node.js. Liá»‡t kÃª táº¥t cáº£ cÃ¡c thÆ° viá»‡n (dependencies) mÃ  dá»± Ã¡n sá»­ dá»¥ng (Express, Sequelize, JWT,...) vÃ  cÃ¡c script Ä‘á»ƒ cháº¡y dá»± Ã¡n (vÃ­ dá»¥: npm start, npm run dev).

ğŸ“„ **server.js**: Äiá»ƒm khá»Ÿi Ä‘áº§u cá»§a á»©ng dá»¥ng. Nhiá»‡m vá»¥ chÃ­nh lÃ :
Khá»Ÿi táº¡o server báº±ng Express.
Káº¿t ná»‘i Ä‘áº¿n CÆ¡ sá»Ÿ dá»¯ liá»‡u thÃ´ng qua connectDB.
Cáº¥u hÃ¬nh cÃ¡c middleware toÃ n cá»¥c (nhÆ° cors Ä‘á»ƒ cho phÃ©p frontend gá»i API, express.json() Ä‘á»ƒ Ä‘á»c dá»¯ liá»‡u JSON tá»« request).
"Gáº¯n" (Mount) táº¥t cáº£ cÃ¡c router tá»« thÆ° má»¥c /src/routes vÃ o cÃ¡c Ä‘Æ°á»ng dáº«n API gá»‘c (vÃ­ dá»¥: app.use('/api/users', userRouter)).
Láº¯ng nghe cÃ¡c request tá»« client trÃªn má»™t cá»•ng (PORT) Ä‘Ã£ Ä‘á»‹nh.
ThÆ° má»¥c src (Source Code)
ÄÃ¢y lÃ  nÆ¡i chá»©a toÃ n bá»™ mÃ£ nguá»“n cá»§a á»©ng dá»¥ng.

ğŸ“„ **connectDB.js**: Chá»‹u trÃ¡ch nhiá»‡m duy nháº¥t cho viá»‡c káº¿t ná»‘i vá»›i CÆ¡ sá»Ÿ dá»¯ liá»‡u PostgreSQL. NÃ³ Ä‘á»c cÃ¡c biáº¿n mÃ´i trÆ°á»ng tá»« file .env vÃ  khá»Ÿi táº¡o má»™t Ä‘á»‘i tÆ°á»£ng Sequelize, sau Ä‘Ã³ export Ä‘á»‘i tÆ°á»£ng nÃ y Ä‘á»ƒ toÃ n bá»™ á»©ng dá»¥ng cÃ³ thá»ƒ sá»­ dá»¥ng Ä‘á»ƒ truy váº¥n CSDL.

ğŸ“„ **generateToken.js**: Chá»©a hÃ m tiá»‡n Ã­ch generateToken. HÃ m nÃ y nhá», Ä‘á»™c láº­p, nháº­n vÃ o id vÃ  role_id cá»§a ngÆ°á»i dÃ¹ng vÃ  táº¡o ra má»™t chuá»—i JSON Web Token (JWT). NÃ³ Ä‘Æ°á»£c sá»­ dá»¥ng láº¡i á»Ÿ cáº£ chá»©c nÄƒng Ä‘Äƒng kÃ½ vÃ  Ä‘Äƒng nháº­p.

ğŸ“„ **emailService.js**: Chá»©a logic nghiá»‡p vá»¥ liÃªn quan Ä‘áº¿n viá»‡c gá»­i email. NÃ³ cáº¥u hÃ¬nh dá»‹ch vá»¥ gá»­i mail (vÃ­ dá»¥: Gmail) vÃ  cung cáº¥p cÃ¡c hÃ m cá»¥ thá»ƒ nhÆ° sendOrderConfirmationEmail (gá»­i mail xÃ¡c nháº­n Ä‘Æ¡n hÃ ng). TÃ¡ch ra service giÃºp Controller gá»n gÃ ng hÆ¡n vÃ  dá»… dÃ ng tÃ­ch há»£p vá»›i cÃ¡c dá»‹ch vá»¥ bÃªn thá»© ba.

ğŸ“„ **authMiddleware.js**: Chá»©a cÃ¡c "lá»›p báº£o vá»‡" cho cÃ¡c API endpoint.
protect: Kiá»ƒm tra token JWT trong header cá»§a request Ä‘á»ƒ xÃ¡c thá»±c ngÆ°á»i dÃ¹ng Ä‘Ã£ Ä‘Äƒng nháº­p hay chÆ°a.
admin: Kiá»ƒm tra role_id cá»§a ngÆ°á»i dÃ¹ng (Ä‘Ã£ Ä‘Æ°á»£c protect xÃ¡c thá»±c) Ä‘á»ƒ phÃ¢n quyá»n, Ä‘áº£m báº£o chá»‰ Admin má»›i cÃ³ thá»ƒ truy cáº­p vÃ o cÃ¡c tÃ i nguyÃªn nháº¥t Ä‘á»‹nh.