<!-- File: /views/pages/cart.ejs -->
<%- include('../partials/header') %>

<section class="h-100" style="background-color: #eee;">
    <div class="container h-100 py-5">
        <div class="row d-flex justify-content-center align-items-center h-100">
            <div class="col-12">

                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h3 class="fw-normal mb-0 text-black">Giỏ Hàng Của Bạn</h3>
                </div>

                <div class="card rounded-3 mb-4">
                    <div class="card-body p-4" id="cart-items-container">
                        <!-- Các sản phẩm trong giỏ hàng sẽ được JS render vào đây -->
                        <p>Đang tải giỏ hàng...</p>
                    </div>
                </div>

                 <div class="card">
                    <div class="card-body">
                        <!-- Tạm tính -->
                        <div class="d-flex justify-content-between mb-2">
                            <span>Tạm tính</span>
                            <strong id="cart-subtotal">0đ</strong>
                        </div>
                        <!-- Phí vận chuyển -->
                        <div class="d-flex justify-content-between mb-2">
                            <span>Phí vận chuyển</span>
                            <strong id="shipping-fee">0đ</strong>
                        </div>
                        <hr>
                        <!-- Phần nhập mã khuyến mãi -->
                        <div class="mb-3">
                            <label for="promo-code-input" class="form-label">Mã khuyến mãi</label>
                            <div class="input-group">
                                <input type="text" class="form-control" id="promo-code-input" placeholder="Nhập mã của bạn">
                                <button class="btn btn-outline-primary" type="button" id="apply-promo-btn">Áp dụng</button>
                            </div>
                            <div id="promo-message" class="mt-2"></div>
                        </div>
                        <hr>
                        <!-- Phần giảm giá (ẩn mặc định) -->
                        <div class="d-flex justify-content-between mb-2 text-success" id="discount-row" style="display: none;">
                            <span>Giảm giá</span>
                            <strong id="discount-amount">0đ</strong>
                        </div>
                        <!-- Tổng cộng cuối cùng -->
                        <div class="d-flex justify-content-between fw-bold fs-5">
                            <span>Tổng cộng</span>
                            <span id="final-total" class="text-danger">0đ</span>
                        </div>
                        <div class="d-grid mt-3">
                            <a href="/checkout" class="btn btn-warning btn-block btn-lg">Tiến hành thanh toán</a>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</section>

<!-- Link đến file script xử lý giỏ hàng -->
<script src="/js/cart.js"></script>

<%- include('../partials/footer') %>